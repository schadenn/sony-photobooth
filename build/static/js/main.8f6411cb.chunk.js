(this["webpackJsonpsony-photobooth"]=this["webpackJsonpsony-photobooth"]||[]).push([[0],{34:function(t,e,n){},35:function(t,e,n){},93:function(t,e,n){"use strict";n.r(e);var o=n(0),i=n(27),c=n.n(i),r=(n(34),n(4)),s=(n(35),9e3),l=n(1);var a=function(t){var e=t.src,n=t.time,o=t.onDoneClick,i="http://".concat(window.location.hostname,":").concat(s,"/photos/");return Object(l.jsxs)("div",{children:[Object(l.jsx)("img",{src:i+e,class:"scale",alt:"review",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:"2337"}}),Object(l.jsxs)("button",{id:"doneBtn",onClick:o,style:{height:"150px",width:"300px",position:"fixed",right:0,bottom:0,zIndex:"2338",fontSize:"3vw"},children:["Fertig (",Math.round(n/1e3),")"]})]})},u=n(28),h=n.n(u),f=n(29);n(92);var d=function(t){var e=t.files,n=t.onDoneClick,i=t.isReviewing,c=t.onOpenClick,a=Object(o.useState)(null),u=Object(r.a)(a,2),d=u[0],b=u[1],j="http://".concat(window.location.hostname,":").concat(s,"/photos/"),p=e.map((function(t){return j+t})).map((function(t){return{src:t,thumbnail:t,thumbnailWidth:280,thumbnailHeight:174}}));return Object(l.jsx)(l.Fragment,{children:i?Object(l.jsxs)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",zIndex:"2337"},children:[d&&Object(l.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",top:"0",left:"0"},children:Object(l.jsx)(f.a,{images:p,index:d-1,canAutoPlay:!1,isMaximized:!0,shouldMinimizeOnSwipeDown:!0,hasSizeButton:!1,onSwipeEndDown:function(){b(null)}})}),Object(l.jsx)("div",{style:{width:"100vw"},children:Object(l.jsx)(h.a,{images:p.reverse(),enableImageSelection:!1,onClickThumbnail:function(t){return b(t+1)}})}),Object(l.jsx)("button",{id:"doneBtn",onClick:function(){b(null),n()},style:{height:"150px",width:"250px",position:"fixed",right:0,bottom:0,zIndex:"2338",fontSize:"3vw",cursor:"pointer"},children:"Fertig"})]}):Object(l.jsx)("div",{className:"flip",style:{position:"absolute",bottom:0,left:0,width:"200px",height:"200px",zIndex:"2337",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"2vw",backgroundImage:"url(".concat(j+e.slice(-1)[0],")"),backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},onClick:c,id:"openManualPreview",children:Object(l.jsx)("p",{className:"flip",children:"Gallerie"})})})};var b=function(){var t=Object(o.useState)(""),e=Object(r.a)(t,2),n=e[0],i=e[1],c=Object(o.useState)([]),u=Object(r.a)(c,2),h=u[0],f=u[1],b=Object(o.useState)(5e3),j=Object(r.a)(b,2),p=j[0],O=j[1],w=Object(o.useState)(12e3),x=Object(r.a)(w,2),g=x[0],m=x[1],v=Object(o.useState)(!1),y=Object(r.a)(v,2),k=y[0],S=y[1],I=Object(o.useState)(!1),C=Object(r.a)(I,2),z=C[0],F=C[1],E=Object(o.useState)(!1),D=Object(r.a)(E,2),M=D[0],P=D[1],R=Object(o.useState)(!1),B=Object(r.a)(R,2),A=B[0],N=B[1],T=Object(o.useRef)([]),J=Object(o.useRef)([]),G=window.location.hostname,H=function(){fetch("http://".concat(G,":").concat(s,"/getPhotos")).then((function(t){return t.json()})).then((function(t){return f(t.files)})).catch((function(t){return console.error("Failed to fetch",t)}))},L=Object(o.useCallback)((function(){setTimeout((function(){return P(!0)}),900),fetch("http://".concat(G,":").concat(s,"/takePhoto")).then((function(t){return t.json()})).then((function(t){i(t.file),S(!1),setTimeout((function(){return P(!1)}),200),H()})).catch((function(t){return console.error("Failed to fetch",t)}))}),[]);return Object(o.useEffect)((function(){H()}),[]),Object(o.useEffect)((function(){n&&(A?N(!1):T.current.push(setInterval((function(){return m((function(t){return t-10}))}),10)))}),[n]),Object(o.useEffect)((function(){g||(T.current.forEach((function(t){return clearInterval(t)})),T.current=[],m(12e3),window.location.href=window.location.href)}),[g]),Object(o.useEffect)((function(){p<2e3&&S(!0),p%1e3||!p||fetch("http://".concat(G,":").concat(s,"/triggerFocus")),0===p&&(L(),J.current.filter((function(t){return"websocket_controlled"!==t})).forEach((function(t){return clearInterval(t)})),J.current=[],O(5e3))}),[p,L]),Object(l.jsxs)("div",{className:"App",style:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",left:0,top:0},children:[n&&g&&T.current.length?Object(l.jsx)(a,{src:n,time:g,onDoneClick:function(){m(0),window.location.href=window.location.href}}):null,h.length?Object(l.jsx)(d,{files:h,isReviewing:z,onOpenClick:function(){return F(!0)},onDoneClick:function(){return F(!1)}}):null,z?null:Object(l.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:function(t){["doneBtn","openManualPreview","startRec","stopRec"].includes(t.target.id)||J.current.push(setInterval((function(){return O((function(t){return t-10}))}),10))},children:[!1,Object(l.jsx)("div",{style:{zIndex:"1337",width:"100%",height:"150px",backgroundColor:"rgba(0,0,0,0.3)",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(l.jsx)("p",{style:{fontSize:"5vw"},children:(M?"Foto kommt sofort":k&&"L\xe4cheln bitte :)")||!J.current.length&&"\ud83d\udc46 Antippen f\xfcr ein Foto \ud83d\udc46"||Math.round(p/1e3)})}),!M&&Object(l.jsx)("img",{class:"videoStream",src:"http://".concat(G,":").concat(s,"/startViewFinder"),alt:"video stream",style:{width:"100%",height:"100%",position:"absolute",left:0,top:0,zIndex:"0"}})]})]})};c.a.render(Object(l.jsx)(b,{}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.8f6411cb.chunk.js.map